!function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],n[o]&&p.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,s=1;s<r.length;s++){var l=r[s];0!==n[l]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={2:0},i=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([379,1,0]),r()}({142:function(e,t,r){"use strict";r.r(t);var a=r(4),n=r(139),i=r(138),o=r(137),s=r(136),l=r(135),c=r(134),u=r(133),d=r(132),p=r(131),f=r(130),m=r(129),g=r(19),y=r.n(g),b=(r(18),r(5)),h=r.n(b),v=r(128),_=r.n(v),A={GATEKEEPER_KEY:"6c5f564b450f91deca224249a6a36033",ZONING_CODE_MAP:{"RSD-1":"Residential Single Family Detached-1","RSD-2":"Residential Single Family Detached-2","RSD-3":"Residential Single Family Detached-3","RSA-1":"Residential Single Family Attached-1","RSA-2":"Residential Single Family Attached-2","RSA-3":"Residential Single Family Attached-3","RSA-4":"Residential Single Family Attached-4","RSA-5":"Residential Single Family Attached-5","RTA-1":"Residential Two-Family Attached-1","RM-1":"Residential Multi-Family-1","RM-2":"Residential Multi-Family-2","RM-3":"Residential Multi-Family-3","RM-4":"Residential Multi-Family-4","RMX-1":"Residential Mixed-Use-1","RMX-2":"Residential Mixed-Use-2","RMX-3":"Residential (Center City) Mixed-Use-3","CA-1":"Auto-Oriented Commercial-1","CA-2":"Auto-Oriented Commercial-2","CMX-1":"Neighborhood Commercial Mixed-Use-1","CMX-2":"Neighborhood Commercial Mixed-Use-2","CMX-2.5":"Neighborhood Commercial Mixed-Use-2.5","CMX-3":"Community Commercial Mixed-Use","CMX-4":"Center City Commercial Mixed-Use","CMX-5":"Center City Core Commercial Mixed-Use","I-1":"Light Industrial","I-2":"Medium Industrial","I-3":"Heavy Industrial",IP:"Port Industrial",ICMX:"Industrial Commercial Mixed-Use",IRMX:"Industrial Residential Mixed-Use",SPENT:"Commercial Entertainment (Casinos)",SPAIR:"Airport",SPINS:"Institutional Development",SPSTA:"Stadium",SPPOA:"Recreation","SP-PO-A":"Recreation",SPPOP:"Recreation"},cleanDorAttribute:function(e){var t=e?String(e):"";return t=t.replace(/\s+/g,""),[null,"0"].indexOf(t)>-1?"":t},concatDorAddress:function(e,t){t=!!t;var r=e.properties,a=this.cleanDorAttribute(r.HOUSE),n=this.cleanDorAttribute(r.STEX),i=this.cleanDorAttribute(r.SUF),o=a;o+=n?"-"+n:"",o+=i||"";var s=this.cleanDorAttribute(r.UNIT);s&&(s="# "+s);var l=["STDIR","STNAM","STDES","STDESSUF"].map(function(e){return r[e]});return l=l.map(this.cleanDorAttribute),l=[o].concat(l),t&&(l=l.concat([s])),""===(o=l.filter(Boolean).join(" "))&&(o="Parcel has no address"),o},getVacancyText:function(e){var t=e.sources.vacantLand.data,r=e.sources.vacantBuilding.data;return 0===t.length&&0===r.length?"Not Likely Vacant":t.length>0?"Likely Vacant Land":r.length>0?"Likely Vacant Building":void 0}};y.a.settings.currency.precision=0;var S={bold:{transform:function(e){return"<strong>"+e+"</strong>"}},booleanToYesNo:{transform:function(e){return e?"Yes":"No"}},thousandsPlace:{transform:function(e){return String(e).match(/\d+/)[0].replace(/(.)(?=(\d{3})+$)/g,"$1,")+" "+(String(e).replace(/[0-9]/g,"")||"")}},currency:{globals:["accounting"],transform:function(e,t){return y.a.formatMoney(e)}},date:{globals:["moment"],transform:function(e,t){return h()(e).format("MM/DD/YYYY")}},dayofweek:{transform:function(e){switch(e){case"FRI":e="Friday";break;case"SAT":e="Saturday";break;case"SUN":e="Sunday";break;case"MON":e="Monday";break;case"TUE":e="Tuesday";break;case"WED":e="Wednesday";break;case"THU":e="Thursday"}return e}},feet:{transform:function(e){return e&&e+" ft"}},getNearest:{transform:function(e,t,r){var a=Math.min.apply(null,e.sources[t].data.map(function(e){return e[r]})),n=e.sources[t].data.filter(function(e){return e[r]==a});return n?n[0]:null}},integer:{transform:function(e){return!isNaN(e)&&parseInt(e)}},nowrap:{transform:function(e){return'<span style="white-space: nowrap;">'+e+"</span>"}},nth:{transform:function(e){return e+([,"st","nd","rd"][e%100>>3^1&&e%10]||"th")}},phoneNumber:{transform:function(e){var t=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?"("+t[1]+") "+t[2]+"-"+t[3]:null}},prettyNumber:{transform:function(e){return!isNaN(e)&&e.toLocaleString()}},rcoPrimaryContact:{transform:function(e){var t=/\(?(\d{3})\)?( |-)?(\d{3})(-| )?(\d{4})/g.exec(e);if(!t)return e;var r=["(",t[1],") ",t[3],"-",t[5]].join(""),a=t[0];return e.replace(a,r)}},squareFeet:{transform:function(e){return e&&e+" sq ft"}},titleCase:{transform:function(e){return(e=e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}},urlFormatter:{transform:function(e){var t=["http//","http://","https://","www.","//","//:"].join("|");return e.replace(new RegExp(t,"gi"),"")}}},D={id:"condoList",type:"http-get",url:"//api.phila.gov/ais/v1/search/",options:{params:{urlAddition:function(e){return e.properties.street_address},gatekeeperKey:A.GATEKEEPER_KEY,include_units:!0,opa_only:!0,page:1},success:function(e){return e}}},E={id:"dorDocuments",type:"http-get",targets:{get:function(e){return e.parcels.dor.data},getTargetId:function(e){return e.properties.OBJECTID}},url:"//services.arcgis.com/fLeGjb7u4uXqeF9q/ArcGIS/rest/services/RTT_SUMMARY/FeatureServer/0/query",options:{params:{where:function(e,t){var r=A.concatDorAddress(e),a=t.geocode.data.properties;if(r&&"null"!==r){var n=t.geocode.data.properties.address_low,i=100*Math.floor(n/100,1);l="((ADDRESS_LOW = "+n+" OR (ADDRESS_LOW >= "+i+" AND ADDRESS_LOW <= "+n+" AND ADDRESS_HIGH >= "+(n-i)+" )) AND STREET_NAME = '"+a.street_name+"' AND STREET_SUFFIX = '"+a.street_suffix+"'";""!=a.street_predir&&(l+=" AND STREET_PREDIR = '"+a.street_predir+"'"),""!=a.address_low_suffix&&(l+=" AND ADDRESS_LOW_SUFFIX = '"+a.address_low_suffix+"'"),"1/2"===a.address_low_frac&&(l+=" AND ADDRESS_LOW_SUFFIX = '2'"),""!=a.street_postdir&&(l+=" AND STREET_POSTDIR = '"+a.street_postdir+"'");var o=A.cleanDorAttribute(e.properties.UNIT),s=a.unit_num;o?l+=" AND UNIT_NUM = '"+o+"'":""!=s&&(l+=" AND UNIT_NUM = '"+s+"'"),l+=") or MATCHED_REGMAP = '"+t.parcels.dor.data[0].properties.BASEREG+"'",l+=" or REG_MAP_ID = '"+t.parcels.dor.data[0].properties.BASEREG+"'"}else var l="MATCHED_REGMAP = '"+t.parcels.dor.data[0].properties.BASEREG+"'";return l},outFields:"DOCUMENT_ID, DISPLAY_DATE, DOCUMENT_TYPE, GRANTORS, GRANTEES, DISCREPANCY",returnDistinctValues:"true",returnGeometry:"false",f:"json"},success:function(e){return e.features}}},w={id:"regmaps",type:"esri",url:"//services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/MASTERMAPINDEX/FeatureServer/0",deps:["parcels.dor"],options:{relationship:"intersects",targetGeometry:function(e,t){var r=[],a=[];e.parcels.dor.data.forEach(function(e){e.geometry.coordinates.forEach(function(e){e.forEach(function(e){if(Array.isArray(e[0]))e.forEach(function(e){var t=e[0],n=e[1];r.push(t),a.push(n)});else{var t=e[0],n=e[1];r.push(t),a.push(n)}})})});var n=Math.min.apply(null,r),i=Math.max.apply(null,r),o=Math.min.apply(null,a),s=Math.max.apply(null,a);return[n,i,o,s].every(function(e){return e})?t.latLngBounds([[o,n],[s,i]]):null}},success:function(e){return e}},I=S.titleCase.transform,R={key:"property",icon:"home",label:"Property Assessments",dataSources:["assessmentHist","opa","zoningBase","zoningAppeals","zoningOverlay","rco"],components:[{type:"callout",slots:{text:"          Property assessment and sale information for this address. Source: Office of Property Assessments (OPA). OPA was formerly a part of the Bureau of Revision of Taxes (BRT) and some City records may still use that name.        "}},{type:"vertical-table",slots:{fields:[{label:"Owners",value:function(e){var t=e.geocode.data.properties.opa_owners.join(", ");return I(t)}},{label:"OPA Address",value:function(e){return I(e.geocode.data.properties.street_address)+"<br>Philadelphia, PA "+e.geocode.data.properties.zip_code}},{label:"Mailing Address",value:function(e){var t=e.sources.opa.data,r=[];return t.mailing_care_of.length>0&&r.push(I(t.mailing_care_of)+"<br>"),t.mailing_address_1.length>0&&r.push(I(t.mailing_address_1)+"<br>"),t.mailing_address_2.length>0&&r.push(I(t.mailing_address_2)+"<br>"),console.log(r),t.mailing_street.length>0?r.join("")+I(t.mailing_street)+"<br>"+I(t.mailing_city_state).replace(/\w$/,function(e){return e.toUpperCase()})+"<br>"+t.mailing_zip:I(t.location)+"<br> Philadelphia, PA "+[t.zip_code.slice(0,5),"-",t.zip_code.slice(5)].join("")}}]},options:{id:"opaData",externalLink:{action:function(){return"View the Real Estate Tax Balance"},href:function(){return"//legacy.phila.gov/revenue/realestatetax/"}}}},{type:"vertical-table",options:{nullValue:"None"},slots:{title:"Property Characteristics",fields:[{label:"OPA Account #",value:function(e){return e.geocode.data.properties.opa_account_num}},{label:"Homestead Exemption",value:function(e){return e.sources.opa.data.homestead_exemption>0?e.sources.opa.data.homestead_exemption:"No"}},{label:"Description",value:function(e){return I(e.sources.opa.data.building_code_description)}},{label:"Condition",value:function(e){var t=e.sources.opa.data.exterior_condition;return 0==t?"Not Applicable":2==t?"Newer Construction / Rehabbed":3==t?"Above Average":4==t?"Average":5==t?"Below Average":6==t?"Vacant":7==t?"Sealed / Structurally Compromised, Open to the Weather":"Not available"}},{label:"Beginning Point",value:function(e){return I(e.sources.opa.data.beginning_point)}},{label:"Land Area",value:function(e){return e.sources.opa.data.total_area},transforms:["integer","prettyNumber","squareFeet"]},{label:"Improvement Area",value:function(e){return e.sources.opa.data.total_livable_area},transforms:["integer","prettyNumber","squareFeet"]}]}},{type:"vertical-table",options:{},slots:{title:"Sales Details",fields:[{label:"Sales Price",value:function(e){return e.sources.opa.data.sale_price},transforms:["currency"]},{label:"Sales Date",value:function(e){return e.sources.opa.data.sale_date},transforms:["date"]}]}},{type:"horizontal-table",options:{id:"valueHist",fields:[{label:"Year",value:function(e,t){return t.year}},{label:"Market Value",value:function(e,t){return t.market_value||"$0"},transforms:["currency"]},{label:"Taxable Land",value:function(e,t){return t.taxable_land||"$0"},transforms:["currency"]},{label:"Taxable Improvement",value:function(e,t){return t.taxable_building||"$0"},transforms:["currency"]},{label:"Exempt Land",value:function(e,t){return t.exempt_land||"$0"},transforms:["currency"]},{label:"Exempt Improvement",value:function(e,t){return t.exempt_building||"$0"},transforms:["currency"]}],sort:{getValue:function(e){return e.year},order:"desc"}},slots:{title:"Valuation History",items:function(e){return e.sources.assessmentHist.data.rows.map(function(e){return e})}}},{type:"callout",slots:{text:'          Corrections to or questions about this property?           <br><a href="//opa.phila.gov/opa.apps/Help/CitizenMain.aspx?sch=Ctrl2&s=1&url=search&id=3172000144"          target="_blank">Submit an Official Inquiry</a> to the Office of Property Assessment        '}},{type:"callout",slots:{title:"Access the Raw Data",text:'          You can download the property assessment dataset in bulk, and get more information about this data at          <a href="//metadata.phila.gov/#home/datasetdetails/5543865f20583086178c4ee5/"          target="_blank">metadata.phila.gov</a>         '}}],basemap:"pwd",identifyFeature:"address-marker",parcels:"pwd",errorMessage:function(e){var t=e.sources.condoList.data;if(!t)return"There is no property assessment record for this address.";var r=t.total_size;if(r>0){var a=r>1;return["<h3>","There ",a?"are":"is"," ",r," condominium ",a?"units":"unit"," at this address.</h3>","<p>You can use the Condominiums tab below to see information for an individual unit.</p>"].join("")}}},T={key:"condos",icon:"building",label:"Condominiums",dataSources:["condoList"],showTopicBasedOnOtherData:{otherData:{opa:{data:void 0}},requiredData:{condoList:{pathToDataArray:["features"],minDataLength:1}}},showTopicOnlyIfDataExists:{condoList:{pathToDataArray:["features"],minDataLength:2}},components:[{type:"callout",slots:{text:"Condominium units at your search address, as recorded for property assessment purposes. Click one of the addresses below to see information for that unit.  Use the back button to return to this list. Source: Office of Property Assessment"}},{type:"horizontal-table",options:{topicKey:"condominiums",id:"condoList",useApiCount:!0,defaultIncrement:25,fields:[{label:"Address",value:function(e,t){var r=t.properties.street_address;return'<a href="#/'+r+'/property">'+r+"</a>"}},{label:"OPA Account #",value:function(e,t){return t.properties.opa_account_num}}]},slots:{title:"Condominiums",highestPageRetrieved:function(e){return e.sources.condoList.data.page},pageCount:function(e){return e.sources.condoList.data.page_count},totalSize:function(e){return e.sources.condoList.data.total_size},items:function(e){return e.sources.condoList.data.features.map(function(e){return e})}}}],basemap:"pwd",identifyFeature:"address-marker",parcels:"pwd"},P={key:"deeds",icon:"book",label:"Deeds",components:[{type:"callout",slots:{text:"          Deed information and document transactions for this address.          The map faithfully reflects property boundaries as described in           recorded deeds including multiple types of easements.          The property boundaries displayed on the map are for reference           only and should not be used in place of the recorded deeds or           land surveys. Source: Department of Records        "}},{type:"collection-summary",options:{descriptor:"parcel",getValue:function(e){return e.properties.STATUS},context:{singular:function(e){return"There is "+e+" at this address."},plural:function(e){return"There are "+e+" at this address."}},types:[{value:1,label:"active parcel"},{value:2,label:"inactive parcel"},{value:3,label:"remainder parcel"}]},slots:{items:function(e){return e.parcels.dor.data}}},{type:"tab-group",options:{getKey:function(e){return e.properties.OBJECTID},getTitle:function(e){return e.properties.MAPREG},getAddress:function(e){return A.concatDorAddress(e)},components:[{type:"vertical-table",options:{nullValue:"None"},slots:{title:"Parcel Details",fields:[{label:"Map Registry #",value:function(e,t){return t.properties.MAPREG}},{label:"Parcel Address",value:function(e,t){return A.concatDorAddress(t)}},{label:"Status",value:function(e,t){var r;switch(t.properties.STATUS){case 1:r="Active";break;case 2:r="Inactive";break;case 3:r="Remainder"}return r}},{label:"Origination Date",value:function(e,t){return t.properties.ORIG_DATE},transforms:["date"]},{label:"Inactive Date",value:function(e,t){return t.properties.INACTDATE},transforms:["date"]},{label:"Has Air Rights",value:function(e,t){return"A"===t.properties.SUFFIX?"Yes":"No"}},{label:"Is Condo",value:function(e,t){return t.properties.CONDOFLAG?"Yes":"No"}},{label:"Perimeter",value:function(e,t){return(t.properties||{}).TURF_PERIMETER},transforms:["integer","prettyNumber","feet"]},{label:"Area",value:function(e,t){return(t.properties||{}).TURF_AREA},transforms:["integer","prettyNumber","squareFeet"]}]}},{type:"horizontal-table",options:{topicKey:"deeds",id:"dorCondoList",defaultIncrement:10,showAllRowsOnFirstClick:!0,showOnlyIfData:!0,fields:[{label:"Condo Parcel",value:function(e,t){return t.recmap+"-"+t.condoparcel}},{label:"Condo Name",value:function(e,t){return t.condo_name}},{label:"Unit #",value:function(e,t){return"Unit #"+t.condounit}}],sort:{getValue:function(e){return e.condounit},order:"asc"}},slots:{title:"Deeded Condominiums",items:function(e,t){var r=t.properties.OBJECTID,a=e.sources.dorCondoList.targets[r],n=a&&a.data;return n&&n.rows||[]}}},{type:"callout",slots:{text:"The list of documents                 shown below may not be a complete history of title to this                 parcel. The list is based solely on documents recorded from                December 1999 forward where those documents contained street addresses                in the original recorded document.                <br> <br>                Discrepancies are indicated for deed documents from May, 2018                to present. Discrepancy details may be accessed by clicking on                the link in the ID field.              "}},{type:"horizontal-table",options:{topicKey:"deeds",id:"dorDocuments",defaultIncrement:25,fields:[{label:"ID",value:function(e,t){return"<a target='_blank' href='http://pdx-app01.city.phila.local/recorder/eagleweb/viewDoc.jsp?node=DOCC"+t.attributes.DOCUMENT_ID+"'>"+t.attributes.DOCUMENT_ID+"<i class='fa fa-external-link'></i></a>"}},{label:"Date",value:function(e,t){return t.attributes.DISPLAY_DATE},nullValue:"no date available",transforms:["date"]},{label:"Type",value:function(e,t){return t.attributes.DOCUMENT_TYPE}},{label:"Grantor",value:function(e,t){return t.attributes.GRANTORS}},{label:"Grantee",value:function(e,t){return t.attributes.GRANTEES}},{label:"Discrepancy",value:function(e,t){return t.attributes.DISCREPANCY}}],sort:{getValue:function(e){return e.attributes.DISPLAY_DATE},order:"desc"}},slots:{title:"Documents",items:function(e,t){var r=t.properties.OBJECTID;return e.sources.dorDocuments.targets[r]?e.sources.dorDocuments.targets[r].data:[]}}}]},slots:{items:function(e){return e.parcels.dor.data}}},{type:"callout",slots:{text:"          Use the buttons below to view images of hard-copy deed maps, some          of which have handwritten information that may be useful for          historical deed research.        "}},{type:"overlay-toggle-group",options:{getKey:function(e){return e.properties.RECMAP}},slots:{title:"Registry Maps",items:function(e){return e.sources.regmaps.data}}}],basemap:"dor",identifyFeature:"dor-parcel",parcels:"dor",imageOverlayGroup:"regmaps"},C={key:"li",icon:"wrench",label:"Licenses & Inspections",dataSources:["liPermits","liInspections","liViolations","liBusinessLicenses","zoningDocs"],components:[{type:"callout",slots:{text:"          Licenses, inspections, permits, property maintenance           violations, and zoning permit documents at your search address.           Source: Department of Licenses & Inspections        "}},{type:"horizontal-table",options:{topicKey:"permits",id:"liPermits",limit:5,fields:[{label:"Date",value:function(e,t){return t.permitissuedate},nullValue:"no date available",transforms:["date"]},{label:"ID",value:function(e,t){return"<a target='_blank' href='//li.phila.gov/#details?entity=permits&eid="+t.permitnumber+"&key="+t.addresskey+"&address="+t.address+"'>"+t.permitnumber+" <i class='fa fa-external-link'></i></a>"}},{label:"Description",value:function(e,t){return t.permitdescription}},{label:"Status",value:function(e,t){return t.status}}],sort:{getValue:function(e){return e.permitissuedate},order:"desc"},externalLink:{action:function(e){return"See "+e+" older permits at L&I Property History"},name:"L&I Property History",href:function(e){var t=e.geocode.data.properties.street_address;return"//li.phila.gov/#summary?address="+encodeURIComponent(t)}}},slots:{title:"Permits",items:function(e){return e.sources.liPermits.data.rows.map(function(e){return e})}}},{type:"horizontal-table",options:{topicKey:"zoning",id:"zoningDocs",fields:[{label:"Date",value:function(e,t){return t.scan_date},nullValue:"no date available",transforms:["date"]},{label:"Permit Number",value:function(e,t){return t.permit_number}},{label:"# Pages",value:function(e,t){return t.num_pages}},{label:"ID",value:function(e,t){console.log("zoning doc",t);var r=t.app_id;return r.length<3&&(r="0"+r),'<a target="_blank" href="//s3.amazonaws.com/lni-zoning-pdfs/'+t.doc_id+'.pdf">'+t.doc_id+' <i class="fa fa-external-link"></i></a></a>'}}],sort:{getValue:function(e){return e.scan_date},order:"desc"}},slots:{title:"Zoning Permit Documents",subtitle:'formerly "Zoning Archive"',items:function(e){if(e.sources.zoningDocs.data&&e.sources.zoningDocs.data.rows)return e.sources.zoningDocs.data.rows.map(function(e){return e})}}},{type:"horizontal-table",options:{topicKey:"permits",id:"liInspections",limit:5,fields:[{label:"Date",value:function(e,t){return t.inspectioncompleted},nullValue:"no date available",transforms:["date"]},{label:"ID",value:function(e,t){return"<a target='_blank' href='//li.phila.gov/#details?entity=violationdetails&eid="+t.casenumber+"&key="+t.addresskey+"&address="+t.address+"'>"+t.casenumber+" <i class='fa fa-external-link'></i></a>"}},{label:"Description",value:function(e,t){return t.inspectiondescription}},{label:"Status",value:function(e,t){return t.inspectionstatus}}],sort:{getValue:function(e){return e.inspectioncompleted},order:"desc"},externalLink:{action:function(e){return"See "+e+" older inspections at L&I Property History"},name:"L&I Property History",href:function(e){var t=e.geocode.data.properties.street_address;return"//li.phila.gov/#summary?address="+encodeURIComponent(t)}}},slots:{title:"Inspections",items:function(e){return e.sources.liInspections.data.rows.map(function(e){return e})}}},{type:"horizontal-table",options:{topicKey:"permits",id:"liViolations",limit:5,fields:[{label:"Date",value:function(e,t){return t.caseaddeddate},nullValue:"no date available",transforms:["date"]},{label:"ID",value:function(e,t){return"<a target='_blank' href='//li.phila.gov/#details?entity=violationdetails&eid="+t.casenumber+"&key="+t.addresskey+"&address="+t.address+"'>"+t.casenumber+" <i class='fa fa-external-link'></i></a>"}},{label:"Description",value:function(e,t){return t.violationdescription}},{label:"Status",value:function(e,t){return t.status}}],sort:{getValue:function(e){return e.caseaddeddate},order:"desc"},externalLink:{action:function(e){return"See "+e+" older violations at L&I Property History"},name:"L&I Property History",href:function(e){var t=e.geocode.data.properties.street_address;return"//li.phila.gov/#summary?address="+encodeURIComponent(t)}}},slots:{title:"Violations",items:function(e){return e.sources.liViolations.data.rows.map(function(e){return e})}}},{type:"horizontal-table",options:{topicKey:"permits",id:"liBusinessLicenses",limit:5,fields:[{label:"Issue Date",value:function(e,t){return t.initialissuedate},transforms:["date"]},{label:"License Number",value:function(e,t){return"<a target='_blank' href='//li.phila.gov/#details?entity=licenses&eid="+t.licensenum+"&key="+t.street_address+"&address="+t.street_address+"'>"+t.licensenum+" <i class='fa fa-external-link'></i></a>"}},{label:"Name",value:function(e,t){return t.business_name}},{label:"Type",value:function(e,t){return t.licensetype}},{label:"Status",value:function(e,t){return t.licensestatus}}],sort:{getValue:function(e){return e.caseaddeddate},order:"desc"},externalLink:{action:function(e){return"See "+e+" older business licenses at L&I Property History"},name:"L&I Property History",href:function(e){var t=e.geocode.data.properties.street_address;return"//li.phila.gov/#summary?address="+encodeURIComponent(t)}}},slots:{title:"Business Licenses",items:function(e){return e.sources.liBusinessLicenses.data.rows.map(function(e){return e})}}},{type:"horizontal-table",options:{topicKey:"permits",id:"liPermitsAdditional",defaultIncrement:25,fields:[{label:"Date",value:function(e,t){return t.attributes.PERMITISSUEDATE},nullValue:"no date available",transforms:["date"]},{label:"ID",value:function(e,t){return"<a target='_blank' href='//li.phila.gov/#details?entity=permits&eid="+t.attributes.PERMITNUMBER+"&key="+t.attributes.ADDRESSKEY+"&address="+t.attributes.ADDRESS+"'>"+t.attributes.PERMITNUMBER+" <i class='fa fa-external-link'></i></a>"}},{label:"Building Area",value:function(e,t){return t.attributes.BLDGAREA},nullValue:"no area available",transforms:["thousandsPlace"]},{label:"Declared Value",value:function(e,t){return t.attributes.DECLAREDVALUE},nullValue:"no value available",transforms:["currency"]}],sort:{getValue:function(e){return e.attributes.PERMITISSUEDATE},order:"desc"}},slots:{title:"Building Area and Value",items:function(e){var t=e.sources.liPermitsAdditional.data;if(null!==t&&void 0!==t)return t.map(function(e){return e})}}}],basemap:"pwd",dynamicMapLayers:[],identifyFeature:"address-marker",parcels:"pwd"},O={key:"zoning",icon:"university",label:"Zoning",dataSources:["zoningOverlay","zoningBase","zoningAppeals","rco"],components:[{type:"callout",slots:{text:"Base district zoning maps, associated zoning overlays, and Registered Community Organizations applicable to your search address. Source: Department of Planning and Development"}},{type:"collection-summary",options:{descriptor:"parcel",getValue:function(e){return e.properties.STATUS},context:{singular:function(e){return"There is "+e+" at this address."},plural:function(e){return"There are "+e+" at this address."}},types:[{value:1,label:"active parcel"},{value:2,label:"inactive parcel"},{value:3,label:"remainder parcel"}]},slots:{items:function(e){return e.parcels.dor.data}}},{type:"tab-group",options:{getKey:function(e){return e.properties.OBJECTID},getTitle:function(e){return e.properties.MAPREG},getAddress:function(e){return concatDorAddress(e)},components:[{type:"badge-custom",options:{titleBackground:"#58c04d",components:[{type:"horizontal-table",options:{topicKey:"zoning",shouldShowFilters:!1,shouldShowHeaders:!1,id:"baseZoning",fields:[{label:"Code",value:function(e,t){return t},transforms:["nowrap","bold"]},{label:"Description",value:function(e,t){return A.ZONING_CODE_MAP[t]}}]},slots:{items:function(e,t){var r=t.properties.OBJECTID,a=(e.sources.zoningBase.targets[r]||{}).data,n=(void 0===a?{}:a).rows,i=(void 0===n?[]:n).map(function(e){return e.long_code}),o=new Set(i);return Array.from(o)}}}]},slots:{title:"Base District"}},{type:"horizontal-table",options:{topicKey:"zoning",id:"zoningOverlay",fields:[{label:"Name",value:function(e,t){return t.overlay_name}},{label:"Code Section",value:function(e,t){return"<a target='_blank' href='"+t.code_section_link+"'>"+t.code_section+" <i class='fa fa-external-link'></i></a>"}}]},slots:{title:"Overlays",items:function(e,t){var r=t.properties.OBJECTID;return((e.sources.zoningOverlay.targets[r]||{}).data||{}).rows||[]}}},{type:"horizontal-table",options:{topicKey:"zoning",id:"baseZoning",fields:[{label:"Bill Type",value:function(e,t){return t.billType}},{label:"Current Zoning",value:function(e,t){return t.currentZoning}},{label:"Pending Bill",value:function(e,t){return'<a target="_blank" href="'.concat(t.pendingbillurl,'">').concat(t.pendingbill,' <i class="fa fa-external-link"></i></a>')}}]},slots:{title:"Pending Bills",items:function(e,t){var r=t.properties.OBJECTID,a=((e.sources.zoningBase.targets[r]||{}).data||{}).rows,n=(void 0===a?[]:a).filter(function(e){return"Yes"===e.pending}).map(function(e){return e.billType="Base District",e.currentZoning=e.long_code,e}),i=[];e.sources.zoningOverlay.targets[r]?i=e.sources.zoningOverlay.targets[r].data.rows.filter(function(e){return"Yes"===e.pending}).map(function(e){return e.billType="Overlay",e.currentZoning=e.overlay_name,e}):i=[];return n.concat(i)}}}]},slots:{items:function(e){return e.parcels.dor.data}}},{type:"horizontal-table",options:{topicKey:"zoning",id:"zoningAppeals",fields:[{label:"Processed Date",value:function(e,t){return t.processeddate},transforms:["date"]},{label:"ID",value:function(e,t){return"<a target='_blank' href='http://li.phila.gov/#details?entity=appeals&eid="+t.appeal_key+"&key="+t.addresskey+"&address="+t.address+"'>"+t.appealno+"<i class='fa fa-external-link'></i></a>"}},{label:"Description",value:function(e,t){return t.appealgrounds}},{label:"Scheduled Date",value:function(e,t){return t.date_scheduled},transforms:["date"]},{label:"Status",value:function(e,t){return t.decision}}],sort:{getValue:function(e){return e.date_scheduled},order:"desc"}},slots:{title:"Appeals",items:function(e){if(e.sources.zoningAppeals.data&&e.sources.zoningAppeals.data.rows)return e.sources.zoningAppeals.data.rows.map(function(e){return e})}}},{type:"callout",slots:{text:'Looking for zoning documents? They are now located in the Licenses & Inspections tab under "Zoning Permit Documents".'}},{type:"horizontal-table",options:{topicKey:"zoning",id:"rco",fields:[{label:"RCO",value:function(e,t){return"<b>"+t.properties.ORGANIZATION_NAME+"</b><br>"+t.properties.ORGANIZATION_ADDRESS}},{label:"Meeting Address",value:function(e,t){return t.properties.MEETING_LOCATION_ADDRESS}},{label:"Primary Contact",value:function(e,t){return t.properties.PRIMARY_NAME+"<br>"+t.properties.PRIMARY_PHONE+"<br>"+t.properties.PRIMARY_EMAIL},transforms:["rcoPrimaryContact"]},{label:"Preferred Method",value:function(e,t){return t.properties.PREFFERED_CONTACT_METHOD}}],externalLink:{forceShow:!0,action:function(){return"See a list of all RCOs in the city [PDF]"},name:"",href:function(e){return"//www.phila.gov/CityPlanning/projectreviews/RCO%20Related/List_of_RCOs.pdf"}}},slots:{title:"Registered Community Organizations",items:function(e){if(e.sources.rco.data)return e.sources.rco.data.map(function(e){return e})}}}],basemap:"dor",dynamicMapLayers:["zoning"],identifyFeature:"dor-parcel",parcels:"dor"};var M={key:"311",icon:"phone",label:"311",dataSources:["threeOneOne"],basemap:"pwd",identifyFeature:"address-marker",parcels:"pwd",components:[{type:"callout",slots:{text:"A more detailed look at 311 service requests near your           search address. This includes sensitive information, such as           request descriptions and records marked private by the customer,          that cannot be shared with the public.        "}},{type:"horizontal-table",options:{topicKey:"311",id:"311",sort:function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({select:!0,sortFields:["distance","date"],getValue:function(e,t){var r;return"date"!==t&&t?"distance"===t&&(r=e._distance):r=e.properties.REQUESTED_DATETIME,r},order:function(e){return"date"===e?"desc":"asc"}},"order",function(e){return"date"===e?"desc":"asc"}),filters:[{type:"time",getValue:function(e){return e.properties.REQUESTED_DATETIME},label:"From the last",values:[{label:"30 days",value:"30",unit:"days",direction:"subtract"},{label:"90 days",value:"90",unit:"days",direction:"subtract"},{label:"year",value:"1",unit:"years",direction:"subtract"}]}],filterByText:{label:"Filter by",fields:["DESCRIPTION","SUBJECT","ADDRESS"]},mapOverlay:{marker:"circle",style:{radius:6,fillColor:"#ff3f3f",color:"#ff0000",weight:1,opacity:1,fillOpacity:1},hoverStyle:{radius:6,fillColor:"yellow",color:"#ff0000",weight:1,opacity:1,fillOpacity:1}},fields:[{label:"Date",value:function(e,t){return t.properties.REQUESTED_DATETIME},nullValue:"no date available",transforms:["date"]},{label:"Address",value:function(e,t){return t.properties.ADDRESS}},{label:"Subject",value:function(e,t){return t.properties.MEDIA_URL?'<a target="_blank" href='+t.properties.MEDIA_URL+">"+t.properties.SUBJECT+"</a>":t.properties.SUBJECT}},{label:"Description (not shared with the public)",value:function(e,t){return t.properties.DESCRIPTION}},{label:"Distance",value:function(e,t){return t._distance+" ft"}}]},slots:{title:"Nearby Service Requests",data:"threeOneOne",items:function(e){return e.sources.threeOneOne.data.map(function(e){return e})}}}]},k={key:"nearby",icon:"map-marker-alt",label:"Nearby",dataSources:["threeOneOneCarto","crimeIncidents","nearbyZoningAppeals"],basemap:"pwd",identifyFeature:"address-marker",parcels:"pwd",components:[{type:"callout",slots:{text:"          See recent activity near your search address including 311           service requests, crimes, zoning appeals, and more. Hover over a          record below to highlight it on the map.        "}},{type:"horizontal-table-group",options:{filters:[{type:"data",getValue:function(e){return e},label:"What nearby activity would you like to see?",values:[{label:"311 Requests",value:"311"},{label:"Crime Incidents",value:"crimeIncidents"},{label:"Zoning Appeals",value:"nearbyZoningAppeals"},{label:"Vacant Properties",value:"vacantIndicatorsPoints"}]}],tables:[{type:"horizontal-table",options:{id:"311",sort:{select:!0,sortFields:["distance","date"],getValue:function(e,t){var r;return"date"!==t&&t?"distance"===t&&(r=e.distance):r=e.requested_datetime,r},order:function(e){return"date"===e?"desc":"asc"}},filters:[{type:"time",getValue:function(e){return e.requested_datetime},label:"From the last",values:[{label:"30 days",value:"30",unit:"days",direction:"subtract"},{label:"90 days",value:"90",unit:"days",direction:"subtract"},{label:"year",value:"1",unit:"years",direction:"subtract"}]}],filterByText:{label:"Filter by text",fields:["service_name","address"]},mapOverlay:{marker:"circle",style:{radius:6,fillColor:"#ff3f3f",color:"#ff0000",weight:1,opacity:1,fillOpacity:1},hoverStyle:{radius:6,fillColor:"yellow",color:"#ff0000",weight:1,opacity:1,fillOpacity:1}},fields:[{label:"Date",value:function(e,t){return t.requested_datetime},nullValue:"no date available",transforms:["date"]},{label:"Address",value:function(e,t){return t.address}},{label:"Subject",value:function(e,t){return t.media_url?'<a target="_blank" href='+t.media_url+">"+t.service_name+"</a>":t.service_name}},{label:"Distance",value:function(e,t){return parseInt(t.distance)+" ft"}}]},slots:{title:"Nearby Service Requests",data:"threeOneOneCarto",items:function(e){return(e.sources.threeOneOneCarto.data||[]).map(function(e){return e})}}},{type:"horizontal-table",options:{id:"crimeIncidents",sort:{select:!0,sortFields:["distance","date"],getValue:function(e,t){var r;return"date"!==t&&t?"distance"===t&&(r=e.distance):r=e.dispatch_date,r},order:function(e){return"date"===e?"desc":"asc"}},filters:[{type:"time",getValue:function(e){return e.dispatch_date},label:"From the last",values:[{label:"30 days",value:"30",unit:"days",direction:"subtract"},{label:"90 days",value:"90",unit:"days",direction:"subtract"}]}],filterByText:{label:"Filter by",fields:["text_general_code"]},mapOverlay:{marker:"circle",style:{radius:6,fillColor:"#6674df",color:"#6674df",weight:1,opacity:1,fillOpacity:1},hoverStyle:{radius:6,fillColor:"yellow",color:"#6674df",weight:1,opacity:1,fillOpacity:1}},fields:[{label:"Date",value:function(e,t){return t.dispatch_date},nullValue:"no date available",transforms:["date"]},{label:"Location",value:function(e,t){return t.location_block}},{label:"Description",value:function(e,t){return t.text_general_code}},{label:"Distance",value:function(e,t){return parseInt(t.distance)+" ft"}}]},slots:{title:"Crime Incidents",data:"crimeIncidents",items:function(e){return(e.sources.crimeIncidents.data||[]).map(function(e){return e})}}},{type:"horizontal-table",options:{id:"nearbyZoningAppeals",sort:{select:!0,sortFields:["distance","date"],getValue:function(e,t){var r;return"date"!==t&&t?"distance"===t&&(r=e.distance):r=e.decisiondate,r},order:function(e){return"date"===e?"desc":"asc"}},filterByText:{label:"Filter by",fields:["appealgrounds"]},mapOverlay:{marker:"circle",style:{radius:6,fillColor:"#009900",color:"#009900",weight:1,opacity:1,fillOpacity:1},hoverStyle:{radius:6,fillColor:"yellow",color:"#009900",weight:1,opacity:1,fillOpacity:1}},fields:[{label:"Date",value:function(e,t){return t.decisiondate},nullValue:"no date available",transforms:["date"]},{label:"Location",value:function(e,t){return t.address}},{label:"Description",value:function(e,t){return t.appealgrounds}},{label:"Distance",value:function(e,t){return parseInt(t.distance)+" ft"}}]},slots:{title:"Zoning Appeals",data:"nearbyZoningAppeals",items:function(e){return(e.sources.nearbyZoningAppeals.data||[]).map(function(e){return e})}}},{type:"horizontal-table",options:{id:"vacantIndicatorsPoints",sort:{select:!0,sortFields:["distance","type"],getValue:function(e,t){var r;return"type"!==t&&t?"distance"===t&&(r=e._distance):r=e.properties.VACANT_FLAG,r}},filterByText:{label:"Filter by",fields:["ADDRESS","VACANT_FLAG"]},mapOverlay:{marker:"circle",style:{radius:6,fillColor:"#9400c6",color:"#9400c6",weight:1,opacity:1,fillOpacity:1},hoverStyle:{radius:6,fillColor:"yellow",color:"#009900",weight:1,opacity:1,fillOpacity:1}},fields:[{label:"Address",value:function(e,t){return t.properties.ADDRESS}},{label:"Property Type",value:function(e,t){return t.properties.VACANT_FLAG}},{label:"Distance",value:function(e,t){return t._distance+" ft"}}],externalLink:{forceShow:!0,action:function(e){return"See more at Vacancy Property Viewer"},name:"Vacancy Property Viewer",href:function(e){return"//phl.maps.arcgis.com/apps/webappviewer/index.html?id=64ac160773d04952bc17ad895cc00680"}}},slots:{title:"Likely Vacant Properties",data:"vacantIndicatorsPoints",items:function(e){return(e.sources.vacantIndicatorsPoints.data||[]).map(function(e){return e})}}}]},slots:{items:function(e){return e.parcel.pwd}}}]};r(165),r(160),r(158);a.library.add(n.faHome,i.faBook,o.faWrench,s.faUniversity,l.faGavel,c.faMapMarkerAlt,u.faLandmark,d.faBuilding,p.faPhone,f.faTint,m.faClone);var x=location.hostname,L=void 0===x?"":x;"localhost"===L||L.match(/(\d+\.){3}\d+/)||(console.log=console.info=console.debug=console.error=function(){});y.a.settings.currency.precision=0,_()({panels:["topics","map"],router:{enabled:!0},defaultAddressTextPlaceholder:{wideStyle:{"max-width":"100%","font-size":"24px","line-height":"28px"},narrowStyle:{"max-width":"100%","font-size":"20px","line-height":"24px"}},geolocation:{enabled:!1},addressInput:{width:415,mapWidth:300,position:"right",autocompleteEnabled:!1,autocompleteMax:15,placeholder:"Search the map"},rootStyle:{position:"absolute",bottom:0,left:0,right:0},gatekeeperKey:A.GATEKEEPER_KEY,map:{defaultBasemap:"pwd",defaultIdentifyFeature:"address-marker",imagery:{enabled:!0},initialImagery:"imagery2018"},baseConfig:"https://cdn.jsdelivr.net/gh/ajrothwell/mapboard-base-config@d18a86feb27b7e7c4496ed422ce30b5d80e64c1b/config.js",parcels:{pwd:{multipleAllowed:!1,geocodeFailAttemptParcel:null,clearStateOnError:!1,wipeOutOtherParcelsOnReverseGeocodeOnly:!0,geocodeField:"PARCELID",parcelIdInGeocoder:"pwd_parcel_id",getByLatLngIfIdFails:!1},dor:{multipleAllowed:!0,geocodeFailAttemptParcel:"pwd",clearStateOnError:!0,wipeOutOtherParcelsOnReverseGeocodeOnly:!1,geocodeField:"MAPREG",parcelIdInGeocoder:"dor_parcel_id",getByLatLngIfIdFails:!0}},imageOverlayGroups:{regmaps:{items:function(e){return e.sources.regmaps.data}}},legendControls:{stormwater:{options:{topics:["stormwater"],showWithBaseMapOnly:!1},data:{Roof:{"background-color":"#FEFF7F"},"Other Impervious Surface":{"background-color":"#F2DCFF"}}},deeds:{options:{topics:["deeds","zoning"],showWithBaseMapOnly:!0},data:{Easements:{"border-color":"rgb(255, 0, 197)","border-style":"solid","border-weight":"1px",width:"12px",height:"12px","font-size":"10px"},"Trans Parcels":{"border-color":"rgb(0, 168, 132)","border-style":"solid","border-weight":"1px",width:"12px",height:"12px","font-size":"10px"},"Rights of Way":{"border-color":"rgb(249, 147, 0)","border-style":"solid","border-weight":"1px",width:"12px",height:"12px","font-size":"10px"}}}},cyclomedia:{enabled:!0,measurementAllowed:!0,popoutAble:!0},pictometry:{enabled:!0},transforms:S,greeting:{message:'    <h2>CityAtlas connects you with information about any address in the city.</h2>    <p>Here are some things you can do with CityAtlas:</p>    <div class="callout">      <ul>        <li>Research real estate information including property values, zoning, and document archives</li>        <li>Get the history of permits, licenses, and inspections at any address</li>        <li>Easily access high-resolution street-level and aerial imagery</li>        <li>View activity around an address, including vacancy, crime, 311 service requests, and more</li>        <li>Explore historical imagery and maps</li>      </ul>    </div>    <p>To get started, click anywhere on the map, or type an address, intersection, OPA account number, or DOR Map Registry number into the search box.</p>  '},dataSources:{threeOneOne:{id:"threeOneOne",type:"esri-nearby",url:"http://ase.phila.gov/arcgis/rest/services/GSG/GIS311_365DAYS/MapServer/0",options:{geometryServerUrl:"http://ase.phila.gov/arcgis/rest/services/Utilities/Geometry/GeometryServer/",distances:800,calculateDistance:!0}},threeOneOneCarto:{id:"threeOneOneCarto",type:"http-get-nearby",url:"https://phl.carto.com/api/v2/sql",options:{table:"public_cases_fc",dateMinNum:1,dateMinType:"year",dateField:"requested_datetime",params:{},distances:250}},assessmentHist:{id:"assessmentHist",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from assessments where parcel_number = '"+e.properties.opa_account_num+"'"}}}},condoList:D,crimeIncidents:{id:"crimeIncidents",type:"http-get-nearby",url:"https://phl.carto.com/api/v2/sql",options:{table:"incidents_part1_part2",dateMinNum:1,dateMinType:"year",dateField:"dispatch_date",params:{},distances:250}},dorCondoList:{id:"dorCondoList",type:"http-get",targets:{get:function(e){return e.parcels.dor.data},getTargetId:function(e){return e.properties.OBJECTID}},url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e,t){return"select * from condominium where mapref = '"+t.parcels.dor.data[0].properties.MAPREG+"'                                          and status in (1,3)"}}}},dorDocuments:E,liBusinessLicenses:{id:"liBusinessLicenses",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from li_business_licenses where eclipse_addressobjectid = '"+e.properties.eclipse_location_id+"'"}}}},liInspections:{id:"liInspections",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from li_case_inspections where address = '"+e.properties.street_address+"' or addresskey = '"+e.properties.li_address_key.toString()+"'"}}}},liPermits:{id:"liPermits",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from li_permits where address = '"+e.properties.street_address+"' or addresskey = '"+e.properties.li_address_key.toString()+"'"}}}},liPermitsAdditional:{id:"liPermitsAdditional",type:"http-get",url:"http://ase.phila.gov/arcgis/rest/services/GSG/GIS_LNI_LI_PERMITS_PLANNING/FeatureServer/0/query?",options:{params:{where:function(e){return"ADDRESS = '"+e.properties.street_address+"' OR ADDRESSKEY = '"+e.properties.li_address_key+"'"},outFields:"*",f:"json"},success:function(e){return e.features}}},liViolations:{id:"liViolations",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from li_violations where address = '"+e.properties.street_address+"' or addresskey = '"+e.properties.li_address_key.toString()+"'"}}}},nearbyZoningAppeals:{id:"nearbyZoningAppeals",type:"http-get-nearby",url:"https://phl.carto.com/api/v2/sql",options:{table:"li_appeals",dateMinNum:1,dateMinType:"year",dateField:"decisiondate",params:{},distances:250}},opa:{id:"opa",type:"http-get",url:"https://data.phila.gov/resource/w7rb-qrn8.json",options:{params:{parcel_number:function(e){return e.properties.opa_account_num}},success:function(e){return e[0]}}},rco:{id:"rco",type:"esri",url:"//services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/Zoning_RCO/FeatureServer/0",options:{relationship:"contains"}},regmaps:w,sanitationCenters:{id:"sanitationCenters",type:"http-get-nearby",url:"https://phl.carto.com/api/v2/sql",options:{table:"sanitation_convenience_centers",params:{},distances:3e4}},streetClosures:{id:"streetClosures",type:"http-get",url:"//services.arcgis.com/fLeGjb7u4uXqeF9q/ArcGIS/rest/services/LaneClosure_Master/FeatureServer/0/query",options:{params:{where:function(e,t){var r="SEG_ID = "+e.properties.seg_id;return r},outFields:"PERMITTYPE, OCCUPANCYTYPE, PERMITNUMBER, EFFECTIVEDATE,                 EXPIRATIONDATE, RAINDATE, PURPOSE, STATUS, SEG_ID, TYPE,                 ADDRESS",returnDistinctValues:"true",returnGeometry:"false",f:"json"},success:function(e){return e.features}}},stormwater:{id:"stormwater",type:"http-get",url:"https://api.phila.gov/stormwater",options:{params:{search:function(e){return e.properties.street_address}},success:function(e){return e[0]}}},vacantBuilding:{id:"vacantBuilding",type:"esri",url:"https://services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/Vacant_Indicators_Bldg/FeatureServer/0",options:{relationship:"contains"},success:function(e){return e}},vacantIndicatorsPoints:{id:"vacantIndicatorsPoints",type:"esri-nearby",url:"https://services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/Vacant_Indicators_Points/FeatureServer/0",options:{geometryServerUrl:"http://gis.phila.gov/arcgis/rest/services/Geometry/GeometryServer/",distances:800,calculateDistance:!0}},vacantLand:{id:"vacandLand",type:"esri",url:"https://services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/Vacant_Indicators_Land/FeatureServer/0",options:{relationship:"contains"},success:function(e){return e}},zoningAppeals:{id:"zoningAppeals",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){var t="select * from li_appeals where address = '"+e.properties.street_address+"'",r=e.properties.li_address_key;return r&&r.length>0&&(t+=" or addresskey = '"+e.properties.li_address_key.toString()+"'"),t}}}},zoningBase:{id:"zoningBase",type:"http-get",dependent:"parcel",targets:{get:function(e){return e.parcels.dor.data},getTargetId:function(e){return e.properties.OBJECTID}},url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e,t){return"              WITH all_zoning AS                 (                   SELECT *                   FROM   phl.zoning_basedistricts                 ),               parcel AS                 (                   SELECT *                   FROM   phl.dor_parcel                   WHERE  dor_parcel.mapreg = '"+e.properties.MAPREG+"'                 ),               zp AS                 (                   SELECT all_zoning.*                   FROM   all_zoning, parcel                   WHERE  St_intersects(parcel.the_geom, all_zoning.the_geom)                 ),               combine AS                 (                   SELECT zp.objectid,                   zp.long_code,                   zp.pending,                   zp.pendingbill,                   zp.pendingbillurl,                   St_area(St_intersection(zp.the_geom, parcel.the_geom)) / St_area(parcel.the_geom) AS overlap_area                   FROM zp, parcel                 ),               total AS                 (                   SELECT long_code, pending, pendingbill, pendingbillurl, sum(overlap_area) as sum_overlap_area                   FROM combine                   GROUP BY long_code, pending, pendingbill, pendingbillurl                 )               SELECT *               FROM total               WHERE sum_overlap_area >= 0.01             "}}}},zoningDocs:{id:"zoningDocs",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from ais_zoning_documents where doc_id = ANY('{"+e.properties.zoning_document_ids+"}'::text[])"}}}},zoningOverlay:{id:"zoningOverlay",type:"http-get",dependent:"parcel",targets:{get:function(e){return e.parcels.dor.data},getTargetId:function(e){return e.properties.OBJECTID}},url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e,t){return"            WITH all_zoning AS               (                 SELECT *                 FROM   phl.zoning_overlays               ),             parcel AS               (                 SELECT *                 FROM   phl.dor_parcel                 WHERE  dor_parcel.mapreg = '"+e.properties.MAPREG+"'               ),             zp AS               (                 SELECT all_zoning.*                 FROM all_zoning, parcel                 WHERE st_intersects(parcel.the_geom, all_zoning.the_geom)               ),             total AS               (                 SELECT zp.*, st_area(St_intersection(zp.the_geom, parcel.the_geom)) / st_area(parcel.the_geom) AS overlap_area                 FROM   zp, parcel               )             SELECT cartodb_id,                   code_section,                   code_section_link,                   objectid,                   overlap_area,                   overlay_name,                   overlay_symbol,                   pending,                   pendingbill,                   pendingbillurl,                   sunset_date,                   type             FROM total             WHERE overlap_area >= 0.01           "}}}}},topics:[R,T,P,C,O,M,{key:"stormwater",icon:"tint",label:"Stormwater",dataSources:["stormwater"],basemap:"pwd",dynamicMapLayers:["stormwater"],identifyFeature:"pwd-parcel",parcels:"pwd",components:[{type:"callout",slots:{text:"Stormwater billing accounts associated with your search address. The property boundaries displayed on the map for reference only and may not be used in place of recorded deeds or land surveys. Boundaries are generalized for ease of visualization. Source: Philadelphia Water Department"}},{type:"vertical-table",options:{},slots:{title:"Parcel",fields:[{label:"Parcel ID",value:function(e){return e.sources.stormwater.data.Parcel.ParcelID}},{label:"Address",value:function(e){return e.sources.stormwater.data.Parcel.Address}},{label:"Building Type",value:function(e){return e.sources.stormwater.data.Parcel.BldgType}},{label:"Gross Area",value:function(e){return e.sources.stormwater.data.Parcel.GrossArea+" sq ft"},transforms:["thousandsPlace"]},{label:"Impervious Area",value:function(e){return e.sources.stormwater.data.Parcel.ImpervArea+" sq ft"},transforms:["thousandsPlace"]},{label:"CAP Eligible",value:function(e){return e.sources.stormwater.data.Parcel.CAPEligible},transforms:["booleanToYesNo"]}]}},{type:"horizontal-table",options:{topicKey:"water",id:"stormwater",fields:[{label:"Account #",value:function(e,t){return t.AccountNumber}},{label:"Customer",value:function(e,t){return t.CustomerName}},{label:"Status",value:function(e,t){return t.AcctStatus}},{label:"Service Type",value:function(e,t){return t.ServiceTypeLabel}},{label:"Size",value:function(e,t){return t.MeterSize}},{label:"Stormwater",value:function(e,t){return t.StormwaterStatus}}],externalLink:{forceShow:!0,action:function(e){return"See more at Stormwater Billing"},name:"Stormwater Billing",href:function(e){return"//www.phila.gov/water/swmap/Parcel.aspx?parcel_id="+e.sources.stormwater.data.Parcel.ParcelID}}},slots:{title:"Accounts",items:function(e){return e.sources.stormwater.data.Accounts.map(function(e){return e})}}}]},k,{key:"districts",icon:"clone",label:"Districts",dataSources:["opa"],components:[{type:"callout",slots:{text:"          Districts related to police, L&I, city planning, streets,           census, and commerce for this address. Sources: Department           of Streets, Licenses and Inspections, Planning and Development,          & Philadelphia Police Dept.        "}},{type:"vertical-table",slots:{title:"Districts",fields:[{label:"Planning",value:function(e){return e.geocode.data.properties.planning_district}},{label:"L+I",value:function(e){return e.geocode.data.properties.li_district}},{label:"Census Tract (2010)",value:function(e){return e.geocode.data.properties.census_tract_2010}},{label:"Census Block Group (2010)",value:function(e){return e.geocode.data.properties.census_block_group_2010}},{label:"Commercial Corridor",value:function(e){return e.geocode.data.properties.commercial_corridor.length>0?e.geocode.data.properties.commercial_corridor:"n/a"}}]},options:{}},{type:"vertical-table",slots:{title:"Public Safety",fields:[{label:"Police District",value:function(e){return e.geocode.data.properties.police_district}},{label:"Police Public Service Area",value:function(e){return e.geocode.data.properties.police_service_area}},{label:"Police Division",value:function(e){return e.geocode.data.properties.political_division}}]},options:{}},{type:"vertical-table",slots:{title:"Streets",fields:[{label:"Highway District",value:function(e){return e.geocode.data.properties.highway_district}},{label:"Highway Section",value:function(e){return e.geocode.data.properties.highway_section}},{label:"Highway Subsection",value:function(e){return e.geocode.data.properties.highway_subsection}},{label:"Street Light Routes",value:function(e){return e.geocode.data.properties.street_light_route}},{label:"Traffic District",value:function(e){return e.geocode.data.properties.traffic_district}},{label:"Traffic PM District",value:function(e){return e.geocode.data.properties.traffic_pm_district}}]},options:{}},{type:"external-link",options:{data:"See more districts in OpenMaps",href:function(){return"//openmaps.phila.gov/"}}}],basemap:"pwd",identifyFeature:"address-marker",parcels:"pwd"}],components:[{type:"topic-set",options:{defaultTopic:"property"}}]})},221:function(e,t){},356:function(e,t,r){var a={"./en-au":122,"./en-au.js":122,"./en-ca":121,"./en-ca.js":121,"./en-gb":120,"./en-gb.js":120,"./en-ie":119,"./en-ie.js":119,"./en-il":118,"./en-il.js":118,"./en-nz":117,"./en-nz.js":117};function n(e){var t=i(e);return r(t)}function i(e){var t=a[e];if(!(t+1)){var r=new Error('Cannot find module "'+e+'".');throw r.code="MODULE_NOT_FOUND",r}return t}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id=356},376:function(e,t,r){(e.exports=r(28)(!1)).push([e.i,".greeting > h2 {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.greeting > .callout {\r\n  border-color: #58c04d;\r\n  background: #fff;\r\n  /*margin: 0 0 1rem 0;*/\r\n  padding: 1rem;\r\n}\r\n\r\n.greeting > .callout > ul {\r\n  margin: 0 0 0 1.42857rem;\r\n  padding: 0 0 0 1.42857rem;\r\n}\r\n\r\n#application .site-header, #application .app-footer {\r\n\tbackground: #2176d2;\r\n}\r\n\r\n#application .site-header .page-title-container h1 {\r\n\tfont-size: 2.14286rem;\r\n}\r\n\r\n/*this fixes an issue with the topic panel scrolling over the footer padding*/\r\n#application .app-footer {\r\n\tposition: relative;\r\n}\r\n\r\n/*small*/\r\n@media screen and (max-width: 39.9375em) {\r\n\t.logo {\r\n\t\tfloat: left;\r\n\t}\r\n\r\n\t.page-title-container {\r\n\t\tfloat: right;\r\n\t}\r\n}\r\n",""])},377:function(e,t,r){var a=r(376);"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(27)(a,n);a.locals&&(e.exports=a.locals)},378:function(e,t,r){e.exports=r.p+"index.html"},379:function(e,t,r){r(378),r(377),e.exports=r(142)}});
//# sourceMappingURL=app.js.map